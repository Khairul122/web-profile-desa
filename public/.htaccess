# Enable Rewrite Engine
RewriteEngine On
RewriteBase /web-desa/public/

# Block direct access to sensitive files
<Files ~ "^.*\.md$|^.git.*$|composer\.json|composer\.lock$">
    Order allow,deny
    Deny from all
</Files>

# Block access to sensitive directories
RewriteRule ^(\.git|vendor|composer\.json|composer\.lock|package\.json|package-lock\.json|node_modules/) - [F,L]

# Handle all routes through index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]